<c-row>
  <c-col xs="12">
    <c-card class="mb-4">
      <c-card-body>
        <div class="d-flex justify-content-between mb-3">
          <h5>Clients</h5>
          <button cButton [ngStyle]="{'background-color': '#1E2029', 'color': 'white'}" (click)="toggleUserForm()">
            Add New Client
          </button>
        </div>

        <table class="table table-striped table-hover" *ngIf="users.length > 0; else noClients">
          <thead>
            <tr>
              <th><c-icon name="cil-user"></c-icon></th>
              <th>Username</th>
              <th>Client ID</th>
              <th>Email</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of users">
              <td><c-icon name="cil-user"></c-icon></td>
              <td>{{ user.name }}</td>
              <td>{{ user.client_id }}</td>
              <td>{{ user.email }}</td>
            </tr>
          </tbody>
        </table>

        <!-- Message for No Clients -->
        <ng-template #noClients>
          <p class="text-center text-muted">No clients available. Click "Add New Client" to create one.</p>
        </ng-template>
      </c-card-body>
    </c-card>
  </c-col>
</c-row>

<!-- Add New User Form -->
<div *ngIf="showUserForm">
  <c-card class="mb-4">
    <c-card-body>
      <h5>Add New Client</h5>
      <form (ngSubmit)="addUser()">
        <c-row>
          <c-col md="6">
            <label for="userName">Username</label>
            <input id="userName" class="form-control" [(ngModel)]="newUser.name" name="userName" required />
          </c-col>
          <c-col md="6">
            <label for="clientId">Client ID</label>
            <input id="clientId" class="form-control" [(ngModel)]="newUser.client_id" name="clientId" required />
          </c-col>
        </c-row>
        <c-row class="mt-3">
          <c-col md="6">
            <label for="email">Email</label>
            <input id="email" type="email" class="form-control" [(ngModel)]="newUser.email" name="email" required />
          </c-col>
        </c-row>
        <div class="mt-4">
          <button cButton [ngStyle]="{'background-color': '#1E2029', 'color': 'white'}" type="submit">
            Save Client
          </button>
          <button cButton [ngStyle]="{'background-color': '#1E2029', 'color': 'white'}" type="button" (click)="toggleUserForm()">
            Cancel
          </button>
        </div>
      </form>
    </c-card-body>
  </c-card>
</div>
